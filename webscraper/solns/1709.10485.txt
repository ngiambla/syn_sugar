utilities use demand response to shift or reduce electricity usage offlexible loads, to better match electricity demand to power generation. acommon mechanism is peak pricing (pp), where consumers pay reduced (increased)prices for electricity during periods of low (high) demand, and its simplicityallows consumers to understand how their consumption affects costs. however,new consumer technologies like internet-connected smart thermostats simplifyreal-time pricing (rp), because such devices can automate the tradeoff betweencosts and consumption. these devices enable consumer choice under rp byabstracting this tradeoff into a question of quality of service (e.g., comfort)versus price. this paper uses a principal-agent framework to design pp and rprates for heating, ventilation, and air-conditioning (hvac) to address adverseselection due to variations in consumer comfort preferences. we formulate thepricing problem as a stochastic bilevel program, and numerically solve it byreformulation as a mixed integer program (mip). last, we compare theeffectiveness of different pricing schemes on reductions of peak load or loadvariability. we find that pp pricing induces hvac consumption to spike high(before), spike low (during), and spike high (after) the pp event, whereas rpachieves reductions in peak loads and load variability while preventing largespikes in electricity usage.